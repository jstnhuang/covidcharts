const usaDailyData = [
  {
    "date" : 20200326,
    "states" : 56,
    "positive" : 80735,
    "negative" : 438603,
    "posNeg" : 519338,
    "pending" : 60251,
    "hospitalized" : 10131,
    "death" : 1163,
    "total" : 579589,
    "dateChecked" : "2020-03-26T20:00:00Z",
    "totalTestResults" : 519338,
    "deathIncrease" : 263,
    "hospitalizedIncrease" : 3995,
    "negativeIncrease" : 80999,
    "positiveIncrease" : 16807,
    "totalTestResultsIncrease" : 97806
  },
  {
    "date" : 20200325,
    "states" : 56,
    "positive" : 63928,
    "negative" : 357604,
    "posNeg" : 421532,
    "pending" : 51235,
    "hospitalized" : 6136,
    "death" : 900,
    "total" : 472767,
    "dateChecked" : "2020-03-25T20:00:00Z",
    "totalTestResults" : 421532,
    "deathIncrease" : 225,
    "hospitalizedIncrease" : 1668,
    "negativeIncrease" : 64846,
    "positiveIncrease" : 11974,
    "totalTestResultsIncrease" : 76820
  },
  {
    "date" : 20200324,
    "states" : 56,
    "positive" : 51954,
    "negative" : 292758,
    "posNeg" : 344712,
    "pending" : 14433,
    "hospitalized" : 4468,
    "death" : 675,
    "total" : 359145,
    "dateChecked" : "2020-03-24T20:00:00Z",
    "totalTestResults" : 344712,
    "deathIncrease" : 204,
    "hospitalizedIncrease" : 1143,
    "negativeIncrease" : 55437,
    "positiveIncrease" : 9802,
    "totalTestResultsIncrease" : 65239
  },
  {
    "date" : 20200323,
    "states" : 56,
    "positive" : 42152,
    "negative" : 237321,
    "posNeg" : 279473,
    "pending" : 14571,
    "hospitalized" : 3325,
    "death" : 471,
    "total" : 294044,
    "dateChecked" : "2020-03-23T20:00:00Z",
    "totalTestResults" : 279473,
    "deathIncrease" : 73,
    "hospitalizedIncrease" : 771,
    "negativeIncrease" : 43858,
    "positiveIncrease" : 10273,
    "totalTestResultsIncrease" : 54131
  },
  {
    "date" : 20200322,
    "states" : 56,
    "positive" : 31879,
    "negative" : 193463,
    "posNeg" : 225342,
    "pending" : 2842,
    "hospitalized" : 2554,
    "death" : 398,
    "total" : 228184,
    "dateChecked" : "2020-03-22T20:00:00Z",
    "totalTestResults" : 225342,
    "deathIncrease" : 126,
    "hospitalizedIncrease" : 590,
    "negativeIncrease" : 37554,
    "positiveIncrease" : 8682,
    "totalTestResultsIncrease" : 46236
  },
  {
    "date" : 20200321,
    "states" : 56,
    "positive" : 23197,
    "negative" : 155909,
    "posNeg" : 179106,
    "pending" : 3477,
    "hospitalized" : 1964,
    "death" : 272,
    "total" : 182583,
    "dateChecked" : "2020-03-21T20:00:00Z",
    "totalTestResults" : 179106,
    "deathIncrease" : 53,
    "hospitalizedIncrease" : 1964,
    "negativeIncrease" : 37762,
    "positiveIncrease" : 6164,
    "totalTestResultsIncrease" : 43926
  },
  {
    "date" : 20200320,
    "states" : 56,
    "positive" : 17033,
    "negative" : 118147,
    "posNeg" : 135180,
    "pending" : 3336,
    "hospitalized" : null,
    "death" : 219,
    "total" : 138516,
    "dateChecked" : "2020-03-20T20:00:00Z",
    "totalTestResults" : 135180,
    "deathIncrease" : 59,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 29028,
    "positiveIncrease" : 5314,
    "totalTestResultsIncrease" : 34342
  },
  {
    "date" : 20200319,
    "states" : 56,
    "positive" : 11719,
    "negative" : 89119,
    "posNeg" : 100838,
    "pending" : 3025,
    "hospitalized" : null,
    "death" : 160,
    "total" : 103863,
    "dateChecked" : "2020-03-19T20:00:00Z",
    "totalTestResults" : 100838,
    "deathIncrease" : 48,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 22894,
    "positiveIncrease" : 3989,
    "totalTestResultsIncrease" : 26883
  },
  {
    "date" : 20200318,
    "states" : 56,
    "positive" : 7730,
    "negative" : 66225,
    "posNeg" : 73955,
    "pending" : 2538,
    "hospitalized" : null,
    "death" : 112,
    "total" : 76493,
    "dateChecked" : "2020-03-18T20:00:00Z",
    "totalTestResults" : 73955,
    "deathIncrease" : 22,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 18621,
    "positiveIncrease" : 2007,
    "totalTestResultsIncrease" : 20628
  },
  {
    "date" : 20200317,
    "states" : 56,
    "positive" : 5723,
    "negative" : 47604,
    "posNeg" : 53327,
    "pending" : 1687,
    "hospitalized" : null,
    "death" : 90,
    "total" : 55014,
    "dateChecked" : "2020-03-17T20:00:00Z",
    "totalTestResults" : 53327,
    "deathIncrease" : 19,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 11500,
    "positiveIncrease" : 1704,
    "totalTestResultsIncrease" : 13204
  },
  {
    "date" : 20200316,
    "states" : 56,
    "positive" : 4019,
    "negative" : 36104,
    "posNeg" : 40123,
    "pending" : 1691,
    "hospitalized" : null,
    "death" : 71,
    "total" : 41814,
    "dateChecked" : "2020-03-16T20:00:00Z",
    "totalTestResults" : 40123,
    "deathIncrease" : 11,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 13553,
    "positiveIncrease" : 846,
    "totalTestResultsIncrease" : 14399
  },
  {
    "date" : 20200315,
    "states" : 51,
    "positive" : 3173,
    "negative" : 22551,
    "posNeg" : 25724,
    "pending" : 2242,
    "hospitalized" : null,
    "death" : 60,
    "total" : 27966,
    "dateChecked" : "2020-03-15T20:00:00Z",
    "totalTestResults" : 25724,
    "deathIncrease" : 11,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 5449,
    "positiveIncrease" : 723,
    "totalTestResultsIncrease" : 6172
  },
  {
    "date" : 20200314,
    "states" : 51,
    "positive" : 2450,
    "negative" : 17102,
    "posNeg" : 19552,
    "pending" : 1236,
    "hospitalized" : null,
    "death" : 49,
    "total" : 20788,
    "dateChecked" : "2020-03-14T20:00:00Z",
    "totalTestResults" : 19552,
    "deathIncrease" : 10,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 3489,
    "positiveIncrease" : 528,
    "totalTestResultsIncrease" : 4017
  },
  {
    "date" : 20200313,
    "states" : 51,
    "positive" : 1922,
    "negative" : 13613,
    "posNeg" : 15535,
    "pending" : 1130,
    "hospitalized" : null,
    "death" : 39,
    "total" : 16665,
    "dateChecked" : "2020-03-13T20:00:00Z",
    "totalTestResults" : 15535,
    "deathIncrease" : 3,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 5572,
    "positiveIncrease" : 607,
    "totalTestResultsIncrease" : 6179
  },
  {
    "date" : 20200312,
    "states" : 51,
    "positive" : 1315,
    "negative" : 8041,
    "posNeg" : 9356,
    "pending" : 673,
    "hospitalized" : null,
    "death" : 36,
    "total" : 10029,
    "dateChecked" : "2020-03-12T20:00:00Z",
    "totalTestResults" : 9356,
    "deathIncrease" : 9,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 1971,
    "positiveIncrease" : 262,
    "totalTestResultsIncrease" : 2233
  },
  {
    "date" : 20200311,
    "states" : 51,
    "positive" : 1053,
    "negative" : 6070,
    "posNeg" : 7123,
    "pending" : 563,
    "hospitalized" : null,
    "death" : 27,
    "total" : 7686,
    "dateChecked" : "2020-03-11T20:00:00Z",
    "totalTestResults" : 7123,
    "deathIncrease" : 27,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 2263,
    "positiveIncrease" : 275,
    "totalTestResultsIncrease" : 2538
  },
  {
    "date" : 20200310,
    "states" : 51,
    "positive" : 778,
    "negative" : 3807,
    "posNeg" : 4585,
    "pending" : 469,
    "hospitalized" : null,
    "death" : null,
    "total" : 5054,
    "dateChecked" : "2020-03-10T20:00:00Z",
    "totalTestResults" : 4585,
    "deathIncrease" : 0,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 440,
    "positiveIncrease" : 194,
    "totalTestResultsIncrease" : 634
  },
  {
    "date" : 20200309,
    "states" : 51,
    "positive" : 584,
    "negative" : 3367,
    "posNeg" : 3951,
    "pending" : 313,
    "hospitalized" : null,
    "death" : null,
    "total" : 4264,
    "dateChecked" : "2020-03-09T20:00:00Z",
    "totalTestResults" : 3951,
    "deathIncrease" : 0,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 1032,
    "positiveIncrease" : 167,
    "totalTestResultsIncrease" : 1199
  },
  {
    "date" : 20200308,
    "states" : 51,
    "positive" : 417,
    "negative" : 2335,
    "posNeg" : 2752,
    "pending" : 347,
    "hospitalized" : null,
    "death" : null,
    "total" : 3099,
    "dateChecked" : "2020-03-08T20:00:00Z",
    "totalTestResults" : 2752,
    "deathIncrease" : 0,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 526,
    "positiveIncrease" : 76,
    "totalTestResultsIncrease" : 602
  },
  {
    "date" : 20200307,
    "states" : 51,
    "positive" : 341,
    "negative" : 1809,
    "posNeg" : 2150,
    "pending" : 602,
    "hospitalized" : null,
    "death" : null,
    "total" : 2752,
    "dateChecked" : "2020-03-07T21:00:00Z",
    "totalTestResults" : 2150,
    "deathIncrease" : 0,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 238,
    "positiveIncrease" : 118,
    "totalTestResultsIncrease" : 356
  },
  {
    "date" : 20200306,
    "states" : 36,
    "positive" : 223,
    "negative" : 1571,
    "posNeg" : 1794,
    "pending" : 458,
    "hospitalized" : null,
    "death" : null,
    "total" : 2252,
    "dateChecked" : "2020-03-06T21:00:00Z",
    "totalTestResults" : 1794,
    "deathIncrease" : 0,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 618,
    "positiveIncrease" : 47,
    "totalTestResultsIncrease" : 665
  },
  {
    "date" : 20200305,
    "states" : 24,
    "positive" : 176,
    "negative" : 953,
    "posNeg" : 1129,
    "pending" : 197,
    "hospitalized" : null,
    "death" : null,
    "total" : 1326,
    "dateChecked" : "2020-03-05T21:00:00Z",
    "totalTestResults" : 1129,
    "deathIncrease" : 0,
    "hospitalizedIncrease" : 0,
    "negativeIncrease" : 205,
    "positiveIncrease" : 58,
    "totalTestResultsIncrease" : 263
  },
  {
    "date" : 20200304,
    "states" : 14,
    "positive" : 118,
    "negative" : 748,
    "posNeg" : 866,
    "pending" : 103,
    "hospitalized" : null,
    "death" : null,
    "total" : 969,
    "dateChecked" : "2020-03-04T21:00:00Z",
    "totalTestResults" : 866,
    "deathIncrease" : null,
    "hospitalizedIncrease" : null,
    "negativeIncrease" : null,
    "positiveIncrease" : null,
    "totalTestResultsIncrease" : null
  }
];

export function generateUsaDaily(use_log) {
  // Remove any that don't have valid dates
  var data = usaDailyData.filter(function(datum) {
    var date = new Date(datum['dateChecked']);
    return date !== "Invalid Date";
  });
  // Sort the list by ascending date
  data.sort(function(a, b) {
    var dateA = new Date(a['dateChecked']);
    var dateB = new Date(b['dateChecked']);
    if (dateA < dateB) {
      return -1;
    } else if (dateA == dateB) {
      return 0;
    } else {
      return 1;
    }
  });
  var dateLabels = data.map(function(datum) {
    var date = new Date(datum['dateChecked']);
    var month = date.getMonth() + 1;
    var monthStr = month < 10 ? "0" + month : "" + month;
    var dayStr =
        date.getDate() < 10 ? "0" + date.getDate() : "" + date.getDate();
    return "" + date.getFullYear() + "-" + monthStr + "-" + dayStr;
  });
  var cases = data.map(function(datum) { return datum["positive"]; });
  return {
    type : 'line',
    data : {
      datasets : [
        {label : '# confirmed cases', data : cases, borderWidth : 1},
      ],
      labels : dateLabels
    },
    options : {
      scales : {
        yAxes : [ {
          ticks : {beginAtZero : true},
          type : use_log ? 'logarithmic' : 'linear'
        } ]
      }
    }
  };
}
